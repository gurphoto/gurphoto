/**


 */
(function(e,t){window.Application={closure:{getArgs:function(){return[window.Application,e,jQuery.noConflict(),t]},apply:function(e){return e.apply(this,this.getArgs())}},alias:function(e,n){var r=e.split("."),i=Application,s=t,o=t,u=t;while((s=r.shift())!==t)i[s]===t&&(i[s]={}),u=i,o=s,i=i[s];return n!==t&&(u[o]=n),i},define:function(t,n,r,i){var s="Base."+t,o=this.alias(s);if(e.isEmpty(o))throw ReferenceError(o+" is undefined.");var a={name:t+"."+n,"super":function(){return o.prototype.initialize.apply(this,arguments)}};this.alias(a.name,o.extend(e.extend(a,r),i))},Base:{},Model:{},Collection:{},Router:{},View:{}},e.extend(window.Application,Backbone.Events),e.templateSettings={escape:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{raw ([\s\S]+?)\}\}/g,evaluate:/<%([\s\S]+?)%>/g}})(_.noConflict()),Application.closure.apply(function(e,t,n){e.on("ready",t.once(function(){})),n(t.bind(e.trigger,e,"ready"))}),Application.closure.apply(function(e,t,n){e.Base.Collection=Backbone.Collection.extend({initialize:function(){var t=this.name.replace("Collection.","").singularize();e.Model[t]!==undefined&&(this.model=e.Model[t])},findById:function(e){return this.find(function(t){return t.get("id")==e})}})}),Application.closure.apply(function(e,t,n){e.Base.Model=Backbone.Model.extend({})}),Application.closure.apply(function(e,t,n){e.Base.View=Backbone.View.extend({initialize:function(){this.loadTemplate()},getTemplate:function(e){e===undefined&&(e=this.name.toLowerCase().replace(/\./g,"-"));var r=n("#"+e);if(r.size()>0)return t.template(r.html());throw new ReferenceError('Undefined template "'+e+'"')},loadTemplate:function(e){this.template=this.getTemplate(e)}})}),Application.closure.apply(function(e,t,n){e.Base.View.Item=e.Base.View.extend({initialize:function(){this.templateName===undefined&&(this.templateName=this.name.toLowerCase().replace(/\./g,"-")),this.template=this.getTemplate(this.templateName),this.model.on("change",this.render,this)},render:function(){return n(this.el).html(this.template(this.model===undefined?{}:this.model.toJSON())),this}})}),Application.closure.apply(function(e,t,n,r){e.Base.View.List=e.Base.View.extend({itemsContainer:".items",initialize:function(){e.Base.View.prototype.initialize.apply(this,arguments);if(this.item===r){var t=this.name.replace("View.List.","").singularize();if(e.View.Item[t]===r)throw new ReferenceError(this.name+" has a undefined item.");this.item=e.View.Item[t]}if(this.collection===r)throw new ReferenceError(this.name+" has a undefined collection.")},render:function(){this.$el.html(this.template({collection:this.collection}));var e=this.$el.find(this.itemsContainer);if(e.size()<1)throw new ReferenceError(this.name+" has a undefined container"+this.itemsContainer+".");return this.collection.on("reset",this.renderAll,this),this.collection.on("add",this.renderOne,this),this.trigger("render"),this},renderOne:function(e){var t=new this.item({model:e});this.$el.find(this.itemsContainer).append(t.render().el)},renderAll:function(){this.$el.find(this.itemsContainer).empty(),this.collection.each(this.renderOne,this)}})});